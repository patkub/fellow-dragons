<dom-module id="site-navbar-scroll">
  <script>
    Polymer({
      is: 'site-navbar-scroll',
      properties: {
        heading: String,
        subheading: String,
        background: String
      },
      created: function() {
        // make the navbar fixed
        var fixNabar = function() {
          $('.navbar-custom').css('position', 'fixed');
          $('.navbar-custom').addClass('is-fixed');
        };

        // collapse navbar after navigate
        $('.navbar-collapse a').click(function(){
          $(".navbar-collapse").collapse('hide');
        });

        var headerHeight = $('.navbar-custom').height();
        $(window).on('resize', function() {
          if ($(window).width() > 768 && $(window).scrollTop() > 0) {
            // fixed navbar on mobile
            fixNabar();
          }
        });

        $(window).on('scroll', {
            previousTop: 0
        },
        function() {
          if ($(window).width() > 768) {
            // navigation slide-in effect on desktop
            var currentTop = $(window).scrollTop();
            if (currentTop < this.previousTop) {
                // hide navbar when scrolling up
                if (currentTop > 0 && $('.navbar-custom').hasClass('is-fixed')) {
                    $('.navbar-custom').addClass('is-visible');
                } else {
                    $('.navbar-custom').removeClass('is-visible is-fixed');
                }
            } else if (currentTop > this.previousTop) {
                // show navbar when scrolling down
                $('.navbar-custom').removeClass('is-visible');
                if (currentTop > headerHeight && !$('.navbar-custom').hasClass('is-fixed')) {
                 $('.navbar-custom').addClass('is-fixed');
               }
            }
          } else {
            // fixed navbar on mobile
            fixNabar();
          }
          this.previousTop = currentTop;
        });
      }
    });
  </script>
</dom-module>
