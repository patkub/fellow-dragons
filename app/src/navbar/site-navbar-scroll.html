<dom-module id="site-navbar-scroll">
  <script>
    Polymer({
      is: 'site-navbar-scroll',
      properties: {
        heading: String,
        subheading: String,
        background: String
      },
      created: function() {
        // collapse navbar after navigate
        $('.navbar-collapse a').click(function(){
          $(".navbar-collapse").collapse('hide');
        });

        // primary navigation slide-in effect
        var headerHeight = $('.navbar-custom').height();
        $(window).on('scroll', {
            previousTop: 0
        },
        function() {
          if ($(window).width() > 768) {
            var currentTop = $(window).scrollTop();
            // check if user is scrolling up
            if (currentTop < this.previousTop) {
                // if scrolling up...
                if (currentTop > 0 && $('.navbar-custom').hasClass('is-fixed')) {
                    $('.navbar-custom').addClass('is-visible');
                } else {
                    $('.navbar-custom').removeClass('is-visible is-fixed');
                }
            } else if (currentTop > this.previousTop) {
                // if scrolling down...
                $('.navbar-custom').removeClass('is-visible');
                if (currentTop > headerHeight && !$('.navbar-custom').hasClass('is-fixed')) {
                 $('.navbar-custom').addClass('is-fixed');
               }
            }
          } else {
            // mobile init
            $('.navbar-custom').addClass('is-fixed');
            $('.navbar-custom').css('position', 'fixed');
          }
          this.previousTop = currentTop;
        });
      }
    });
  </script>
</dom-module>
