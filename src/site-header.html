<dom-module id="site-header">
  <template>
    <header class="intro-header" style="background-image: url('[[background]]')">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="site-heading">
                        <h1>[[heading]]</h1>
                        <hr class="small">
                        <span class="subheading">[[subheading]]</span>
                    </div>
                </div>
            </div>
        </div>
    </header>
  </template>

  <script>
    Polymer({
      is: 'site-header',
      properties: {
        heading: String,
        subheading: String,
        background: String
      },
      created: function() {
        var MQL = 1170;

        // primary navigation slide-in effect
        if ($(window).width() > MQL) {
          var headerHeight = $('.navbar-custom').height();
          $(window).on('scroll', {
              previousTop: 0
          },
          function() {
            var currentTop = $(window).scrollTop();
            // check if user is scrolling up
            if (currentTop < this.previousTop) {
                // if scrolling up...
                if (currentTop > 0 && $('.navbar-custom').hasClass('is-fixed')) {
                    $('.navbar-custom').addClass('is-visible');
                } else {
                    $('.navbar-custom').removeClass('is-visible is-fixed');
                }
            } else if (currentTop > this.previousTop) {
                // if scrolling down...
                $('.navbar-custom').removeClass('is-visible');
                if (currentTop > headerHeight && !$('.navbar-custom').hasClass('is-fixed')) {
                 $('.navbar-custom').addClass('is-fixed');
               }
            }
            this.previousTop = currentTop;
          });
        }
      }
    });
  </script>
</dom-module>
